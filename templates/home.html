{% extends "layout/base.html" %}

{% block content %}
<!-- <style>
  .card-footer-div {
    background: none !important;
    padding: 0.75 rem 1.25 rem !important;
    border-top: 1px solid transparent !important;
  }

  .icon-eye {
    color: #16353f;
    cursor: pointer;
  }

  .card-common-style {
    width: 18rem;
    box-shadow: 5px 7px #1c4552;
  }
  .footer-text {
    font-size: 12px;
    color: #555; /* Adjust the color as needed */
    text-align: center;
    margin-top: 10px;
  }
</style>
<script>
  $(document).ready(function () {
    $("#show_hide_password div").on("click", function (event) {
      event.preventDefault();
      if ($("#show_hide_password input").attr("type") == "text") {
        $("#show_hide_password input").attr("type", "password");
        document.getElementsByClassName(
          "input-group-text"
        )[0].children[0].innerHTML =
          '<i class="material-icons icon-eye">visibility_off</i>';
      } else if ($("#show_hide_password input").attr("type") == "password") {
        $("#show_hide_password input").attr("type", "text");
        document.getElementsByClassName(
          "input-group-text"
        )[0].children[0].innerHTML =
          '<i class="material-icons icon-eye">visibility</i>';
      }
    });
  });
  let data = JSON.parse(localStorage.getItem("jobApplications"));
  const wishlistCompanyNames = data
    .filter((entry) => entry.status === "Wishlist")
    .map((entry) => entry.company);
  const inProgressCompanyNames = data
    .filter((entry) => entry.status === "In Progress")
    .map((entry) => entry.company);
  const appliedCompanyNames = data
    .filter((entry) => entry.status === "Applied")
    .map((entry) => entry.company);
  const offerCompanyNames = data
    .filter((entry) => entry.status === "Offer")
    .map((entry) => entry.company);
</script> -->

<!-- <div class="row">
  <div class="card status-card col-md card-common-style">
    <i class="material-icons card-icons">beenhere</i>
    <div class="card-body">
      <h5 class="card-title">Applied</h5>
      <ul class="list-group list-group-flush">
        <script>
          for (const company of appliedCompanyNames) {
            document.write(
              '<li class="list-group-item border-0">' + company + "</li>"
            );
          }
        </script>
      </ul>
    </div>
    <div class="card-footer card-footer-div">
      <a href="/companiesList?status=Applied" class="card-link">View More</a>
      <a href="#" class="card-link" data-toggle="modal" data-target="#exampleModalCenter">Add New</a>
    </div>
  </div>

  <div class="card status-card col-md card-common-style">
    <i class="material-icons card-icons">trending_up</i>
    <div class="card-body">
      <h5 class="card-title">In Process</h5>
      <ul class="list-group list-group-flush">
        <script>
          for (const company of inProgressCompanyNames) {
            document.write(
              '<li class="list-group-item border-0">' + company + "</li>"
            );
          }
        </script>
      </ul>
    </div>
    <div class="card-footer card-footer-div">
      <a href="/companiesList?status=In Progress" class="card-link">View More</a>
      <a href="#" class="card-link" data-toggle="modal" data-target="#exampleModalCenter">Add New</a>
    </div>
  </div>
</div>

<div class="row">
  <div class="card status-card col-md card-common-style">
    <i class="material-icons card-icons">star</i>
    <div class="card-body">
      <h5 class="card-title">Wish List</h5>
      <ul class="list-group list-group-flush">
        <script>
          for (const company of wishlistCompanyNames) {
            document.write(
              '<li class="list-group-item border-0">' + company + "</li>"
            );
          }
        </script>
      </ul>
    </div>
    <div class="card-footer card-footer-div">
      <a href="/companiesList?status=Wishlist" class="card-link">View More</a>
      <a href="#" class="card-link" data-toggle="modal" data-target="#exampleModalCenter">Add New</a>
    </div>
  </div>

  <div class="card status-card col-md card-common-style">
    <i class="material-icons card-icons">task</i>
    <div class="card-body">
      <h5 class="card-title">Offers</h5>
      <script>
        for (const company of offerCompanyNames) {
          document.write(
            '<li class="list-group-item border-0">' + company + "</li>"
          );
        }
      </script>
    </div>
    <div class="card-footer card-footer-div">
      <a href="/companiesList?status=Offer" class="card-link">View More</a>
      <a href="#" class="card-link" data-toggle="modal" data-target="#exampleModalCenter">Add New</a>
    </div>
  </div>
</div> -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Job Listings</title>
    <style>
      body {
          font-family: Arial, sans-serif;
      }
      table {
          border-collapse: collapse;
          width: 100%;
      }
      th, td {
          border: 1px solid #dddddd;
          text-align: left;
          padding: 8px;
          color: #333; /* Dark font color */
      }
      th {
          background-color: #f2f2f2;
      }
      tr {
          background-color: #ffe6e6; /* Light reddish-pink */
      }
      tr:hover {
          background-color: #f9cccc; /* Lighter shade on hover */
      }
      /* Styles for dropdown */
      .dropdown {
          position: relative;
          display: inline-block;
      }
      .dropdown-content {
          display: none;
          position: absolute;
          background-color: #ffffff;
          min-width: 120px;
          box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
          z-index: 1;
      }
      .dropdown-content a {
          color: #333; /* Dark font color */
          padding: 12px 16px;
          text-decoration: none;
          display: block;
      }
      .dropdown-content a:hover {
          background-color: #f1f1f1;
      }
      .dropdown:hover .dropdown-content {
          display: block;
      }
    </style>
</head>
<!-- Rest of your HTML content here -->
</html>


<style>
  /* Darken the modal */
  .modal-content {
    background-color: #333;
    color: #fff;
  }

  /* Style the header */
  .modal-header {
    background-color: #222;
    color: #fff;
    border-bottom: 1px solid #444;
  }

  /* Style the form labels and inputs */
  .modal-body label {
    color: #fff;
  }

  .modal-body input[type="text"],
  .modal-body input[type="number"],
  .modal-body input[type="email"],
  .modal-body textarea {
    background-color: #444;
    color: #fff;
    border: 1px solid #666;
  }

  /* Style the submit button */
  .modal-footer {
    background-color: #222;
    border-top: 1px solid #444;
  }

  .modal-footer button {
    background-color: #007bff;
    color: #fff;
  }

  /* Optional: Style other elements as needed */
</style>

<div class="container">

    <div class="jumbotron p-3">
      <h2>Job Application Portal<button type="button" class="btn btn-success float-right" data-toggle="modal" data-target="#mymodal">Add New Job Application</button></h2>
    </div>

    <table class = "table table-hover table-dark">
      <tr>
        <th>Company</th>
        <th>Location</th>
        <th>Job Position</th>
        <th>Salary</th>
        <th>Status</th>
        <th>Edit</th>
        <th>Delete</th>      
      </tr>

      {% for row in jobapplications %}
      <tr>
        <td>{{ row[1] }}</td>
        <td>{{ row[2] }}</td>
        <td>{{ row[3] }}</td>
        <td>{{ row[4] }}</td>
        <td>{{ row[5] }}</td>
        <td>
          <a href="{{ url_for('update_job_application') }}"  data-toggle="modal" data-target="#modaledit{{row[0]}}">
            ✎ <!-- Edit Icon -->
          </a>
        </td>
        <td>
          <a href="{{ url_for('delete_job_application', company=row[1]) }}"  data-toggle="modal" data-target="#modaldelete{{row[0]}}">
            ❌ <!-- Delete Icon -->
          </a>
        </td>
      </tr>
      <div id="modaledit{{row[0]}}" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Update Job Application</h4>
            </div>
            <div class="modal-body">
              <form action="{{url_for('update_job_application')}}" method="POST">
                <div class="form-group">
                  <label>Company:</label>
                  <input type="text" class="form-control" name="company" required="1" value="{{row[1]}}">
                </div>
                <div class="form-group">
                  <label>Location:</label>
                  <input type="text" class="form-control" name="location" required="1" value="{{row[2]}}">
                </div>
                <div class="form-group">
                  <label>Job Position:</label>
                  <input type="text" class="form-control" name="jobposition" required="1" value="{{row[3]}}">
                </div>
                <div class="form-group">
                  <label>Salary:</label>
                  <input type="number" class="form-control" name="salary" required="1" value="{{row[4]}}">
                </div>
                <div class="form-group">
                  <label>Status:</label>
                  <input type="text" class="form-control" name="status" required="1" value="{{row[5]}}">
                </div>
                <div class="form-group">
                  <input type="submit" class="btn btn-primary" value="Update Job Application">
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
  
          </div>
  
        </div>
      </div>

      <div id="modaldelete{{row[0]}}" class="modal fade" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="confirmDeleteModalLabel">Confirmation</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Are you sure you want to delete this job application?
            </div>
            <form id="deleteForm" action="{{ url_for('delete_job_application', company=row[1]) }}" method="POST">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </form>
          </div>
        </div>
      </div>

      {%endfor%}
    </table>
    <div id="mymodal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Add Job Application</h4>
          </div>
          <div class="modal-body">
            <form action="{{ url_for('add_job_application') }}" method="POST">
              <div class="form-group">
                <label>Company:</label>
                <input type="text" class="form-control" name="company" required="1">
              </div>
              <div class="form-group">
                <label>Location:</label>
                <input type="text" class="form-control" name="location" required="1">
              </div>
              <div class="form-group">
                <label>Job Position:</label>
                <input type="text" class="form-control" name="jobposition" required="1">
              </div>
              <div class="form-group">
                <label>Salary:</label>
                <input type="number" class="form-control" name="salary" required="1">
              </div>
              <div class="form-group">
                <label>Status:</label>
                <input type="text" class="form-control" name="status" required="1">
              </div>
              <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Add Job Application">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>

        </div>

      </div>

    </div>
</div>



<!-- 
<p class='text-right'><a class='btn btn-success '> Add Job </a></p>
<table class='table table-bordered'>
  <thead>
    <th>Company</th>
    <th>Location</th>
    <th>Job Position</th>
    <th>Salary</th>
    <th>Status</th>
    <th>Edit</th>
    <th>Delete</th>
  </thead>
  <tbody>
    {% for row in datas %}
      <tr>
        <td>{{loop.index}}</td>
        <td>{{row.UNAME}}</td>
        <td>{{row.CONTACT}}</td>
        <td><a href='{{url_for("edit_user",uid=row.UID)}}' class='btn btn-primary'>Edit</a></td>
        <td><a href='{{url_for("delete_user",uid=row.UID)}}' class='btn btn-danger' onclick='return confirm("Are You Sure")'>Delete</a></td>
      </tr>
    {%endfor%}
  </tbody>
</table> -->



<!-- Modal for New Application -->
<!-- <form action="{{url_for('add_New')}}" method="POST">
  <div class="modal fade new-application-modal" id="exampleModalCenter" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">
            New Job Application
          </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="text-align: left">
          <div class="form-group">
            <label for="exampleInputName">Company Name</label>
            <input type="text" name="fullname" class="form-control" id="exampleInputName" placeholder="Google"
              required="required" />
          </div>
          <div class="form-group">
            <label for="Location" required="required">Location</label>
            <input type="text" name="location_text" class="form-control" id="Location" placeholder="Enter Location" />
          </div>
          <div class="form-group">
            <label for="JobProfile">Job Profile</label>
            <input type="text" name="text" class="form-control" id="JobProfile" placeholder="Enter Job Profile" />
          </div>
          <div class="form-group">
            <label for="Salary">Salary</label>
            <input type="text" name="sal" class="form-control" id="Salary" placeholder="Enter Salary" />
          </div>
          <div class="form-group">
            <label for="Username">Username</label>
            <input type="text" name="user" class="form-control" id="Username" placeholder="Enter Username" />
          </div>
          <div class="form-group">
            <label for="Password">Password</label>
            <div class="input-group" id="show_hide_password">
              <input type="password" name="pass" class="form-control" id="Password" placeholder="Enter Password" />
              <div class="input-group-append">
                <span class="input-group-text">
                  <i class="material-icons icon-eye">visibility</i></span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="Email">User Email</label>
            <input type="text" name="user_email" class="form-control" id="Email" placeholder="Enter Email" />
          </div>
          <div class="form-group">
            <label for="SecurityQuestion">Security Question</label>
            <input type="text" name="sec_question" class="form-control" id="SecurityQuestion"
              placeholder="Enter Security Question" />
          </div>
          <div class="form-group">
            <label for="SecurityAnswer">Security Answer</label>
            <input type="text" name="sec_address" class="form-control" id="SecurityAnswer"
              placeholder="Enter Security Answer" />
          </div>
          <div class="form-group">
            <label for="Notes">Notes</label>
            <textarea name="notes" class="form-control" id="Notes"
              placeholder="Save links and other information here"></textarea>
          </div>
          <div class="form-group">
            <label for="example-date-input" class="col-3 col-form-label">Date Applied</label>
            <div class="col-10">
              <input class="form-control" name="starting_date" type="date" value="2020-02-01" id="example-date-input" />
            </div>
          </div>
          <div class="form-group mt-3">
            <label class="mr-4">Upload your CV:</label>
            <input type="file" name="file" accept=".docx, .doc, .pdf, .png, .jpeg, .jpg" />
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
          </button>
          <button href="add_New" type="Submit" class="btn btn-primary" value="add_New()">
            Add
          </button>
        </div>
      </div>
    </div>
  </div>
</form>
<div class="footer-text">
  For support and inquiries related to WolfTrack 4.0, please contact us at <a
    href="mailto:wolftrack404@gmail.com">wolftrack404@gmail.com</a>.<br> Join our active Discord community at <a
    href="https://discord.gg/bmaXxb3yg4">https://discord.gg/bmaXxb3yg4</a> to engage, ask questions, and receive timely
  updates.
</div> -->
{% endblock content %}